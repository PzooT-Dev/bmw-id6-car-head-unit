<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMW iD6 Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/id6-dashboard.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body class="{% if display_settings.night_mode %}night-mode{% endif %}">
    <div id="bmw-id6-app">
        <!-- Status Bar -->
        <div id="status-bar">
            <div class="time">{{ vehicle_data.time }}</div>
            <div class="temperature">Outside: {{ vehicle_data.outside_temp }}°C</div>
        </div>
        
        <!-- Main Content Area -->
        <div id="content">
            <div id="dashboard-screen" class="screen active">
                <!-- Dashboard Content -->
                <div class="id6-dashboard">
                    <!-- Media Panel -->
                    <div class="id6-panel media-panel">
                        <div class="panel-header">
                            <div class="panel-title">Media/Radio</div>
                        </div>
                        <div class="panel-content">
                            <div class="media-now-playing">
                                <div class="media-info">
                                    <div class="media-artist">Unknown artist</div>
                                    <div class="media-track">{{ radio_data.station_name }}</div>
                                </div>
                                <div class="media-art">
                                    <div class="media-art-placeholder">
                                        <i class="media-icon">♫</i>
                                    </div>
                                </div>
                            </div>
                            <div class="media-status">
                                <div class="media-source">
                                    <span class="play-icon">▶</span>
                                    <span class="source-text">{{ radio_data.mode }} Radio</span>
                                </div>
                                <div class="source-details">{{ radio_data.frequency }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Communication Panel -->
                    <div class="id6-panel communication-panel">
                        <div class="panel-header">
                            <div class="panel-title">Communication</div>
                        </div>
                        <div class="panel-content">
                            <div class="comm-status">
                                <div class="comm-device">
                                    <div class="device-name">System Status</div>
                                    <div class="device-battery"><span class="battery-indicator">■</span></div>
                                </div>
                            </div>
                            <div class="comm-placeholder">
                                <div class="placeholder-text">No active connections</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Vehicle Panel -->
                    <div class="id6-panel vehicle-panel">
                        <div class="panel-header">
                            <div class="panel-title">My Vehicle</div>
                        </div>
                        <div class="panel-content">
                            <div class="vehicle-stats">
                                <div class="stat-row">
                                    <div class="stat-icon">⛽</div>
                                    <div class="stat-value">{{ vehicle_data.fuel_level }}%</div>
                                </div>
                                <div class="stat-row">
                                    <div class="stat-icon">⚙️</div>
                                    <div class="stat-value">{{ vehicle_data.coolant_temp }}°C</div>
                                </div>
                            </div>
                            <div class="vehicle-image">
                                <div class="image-placeholder">
                                    <div class="car-silhouette">BMW</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Traditional gauges as backup/secondary view -->
                <div class="traditional-dash">
                    <div class="gauges">
                        <div class="gauge-container">
                            <div class="gauge-title">SPEED</div>
                            <div class="gauge speed-gauge">
                                <div class="gauge-value">{{ vehicle_data.speed }}</div>
                                <div class="gauge-unit">km/h</div>
                            </div>
                        </div>
                        <div class="gauge-container">
                            <div class="gauge-title">RPM</div>
                            <div class="gauge rpm-gauge">
                                <div class="gauge-value">{{ vehicle_data.rpm }}</div>
                                <div class="gauge-unit"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="vehicle-data">
                        <div class="data-container">
                            <div class="data-title">FUEL</div>
                            <div class="data-value">{{ vehicle_data.fuel_level }}%</div>
                            <div class="fuel-bar">
                                <div class="fuel-level" style="width: {{ vehicle_data.fuel_level }}%"></div>
                            </div>
                        </div>
                        <div class="data-container">
                            <div class="data-title">COOLANT</div>
                            <div class="data-value">{{ vehicle_data.coolant_temp }}°C</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="media-screen" class="screen">
                <!-- Media Player Content -->
                <div class="media-header">
                    <div class="media-title">BMW Media</div>
                    <div class="media-mode">{{ radio_data.mode }}</div>
                </div>
                
                <div class="station-info">
                    <div class="station-name">{{ radio_data.station_name }}</div>
                    <div class="station-frequency">{{ radio_data.frequency }}</div>
                </div>
                
                <div class="rds-text">{{ radio_data.rds_text }}</div>
                
                <div class="signal-strength">
                    <div class="signal-label">Signal</div>
                    <div class="signal-bar-container">
                        <div class="signal-bar" style="width: {{ radio_data.signal_strength }}%"></div>
                    </div>
                    <div class="signal-value">{{ radio_data.signal_strength }}%</div>
                </div>
                
                <div class="media-controls">
                    <button id="prev-station" class="media-button">Prev</button>
                    <button id="play-pause" class="media-button primary">
                        {% if radio_data.is_playing %}Pause{% else %}Play{% endif %}
                    </button>
                    <button id="next-station" class="media-button">Next</button>
                </div>
                
                <div class="volume-control">
                    <div class="volume-label">Volume</div>
                    <input type="range" id="volume-slider" min="0" max="100" value="{{ audio_settings.volume }}">
                    <div class="volume-value">{{ audio_settings.volume }}%</div>
                </div>
                
                <button id="toggle-mode" class="mode-button">
                    Switch to {% if radio_data.mode == 'FM' %}DAB{% else %}FM{% endif %}
                </button>
            </div>
            
            <div id="navigation-screen" class="screen">
                <!-- Navigation Content -->
                <div class="nav-header">
                    <div class="nav-title">BMW Navigation</div>
                </div>
                
                <div class="nav-content">
                    <div class="nav-message">Navigation Ready</div>
                    <div class="nav-placeholder">Navigation display would be shown here</div>
                </div>
            </div>
            
            <div id="settings-screen" class="screen">
                <!-- Settings Content -->
                <div class="settings-header">
                    <div class="settings-title">Settings</div>
                </div>
                
                <div class="settings-content">
                    <div class="setting-control">
                        <div class="setting-label">Brightness</div>
                        <input type="range" id="brightness-slider" min="0" max="100" value="{{ display_settings.brightness }}">
                        <div class="setting-value">{{ display_settings.brightness }}%</div>
                    </div>
                    
                    <div class="setting-control">
                        <div class="setting-label">Audio Balance</div>
                        <input type="range" id="balance-slider" min="0" max="100" value="{{ audio_settings.balance }}">
                        <div class="setting-value">
                            L <span class="balance-indicator">{{ '-' * (audio_settings.balance // 10) }}|{{ '-' * ((100 - audio_settings.balance) // 10) }}</span> R
                        </div>
                    </div>
                    
                    <div class="setting-control">
                        <div class="setting-label">Night Mode</div>
                        <button id="night-mode-toggle" class="setting-button {% if display_settings.night_mode %}active{% endif %}">
                            {% if display_settings.night_mode %}ON{% else %}OFF{% endif %}
                        </button>
                    </div>
                    
                    <div class="system-status">
                        <div class="status-header">System Status</div>
                        <div class="status-grid">
                            <div class="status-label">CAN Bus:</div>
                            <div class="status-value connected">Connected</div>
                            
                            <div class="status-label">Radio:</div>
                            <div class="status-value connected">Active</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation Bar -->
        <div id="nav-bar">
            <button class="nav-button active" data-screen="dashboard-screen">Dashboard</button>
            <button class="nav-button" data-screen="media-screen">Media</button>
            <button class="nav-button" data-screen="navigation-screen">Navigation</button>
            <button class="nav-button" data-screen="settings-screen">Settings</button>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>